"use strict";const e=require("../../common/vendor.js"),a=require("../../api/topic.js"),t=require("../../api/chat.js");require("../../axios/api.js"),require("../../config/env.js"),Math||(o+n)();const o=()=>"../../components/CommonHeader.js",n=()=>"../chat/components/MessageContent.js",i=e.defineComponent({__name:"completion",setup(o){const n=e.ref(!1),i=e.ref(!1),s=e.ref(null),u=e.ref(null),l=e.ref({id:void 0,speech_role_name:"",avatar:"",messages:{total:0,list:[]},topic_id:""}),r=e.ref([]);e.onLoad((a=>{e.index.setNavigationBarTitle({title:"AISPeak"}),a.redirectType&&(u.value=a.redirectType),c(a.topicId,a.sessionId)}));const c=(e,o)=>{n.value=!0,a.topicRequest.getTopicCompletation({topic_id:e,session_id:o}).then((e=>{n.value=!1,s.value=e.data})),i.value=!0,t.chatRequest.sessionDetailsGet({sessionId:o}).then((e=>{i.value=!1,l.value=e.data,l.value.messages.list.forEach((e=>{r.value.push({id:e.id,session_id:e.session_id,content:e.content,role:e.role,owner:"USER"===e.role,file_name:e.file_name,auto_hint:!1,auto_play:!1,auto_pronunciation:!1,pronunciation:e.pronunciation})}))}))},d=()=>{"index"===u.value?e.index.switchTab({url:"/pages/textbook/index"}):e.index.navigateBack()};return(a,t)=>e.e({a:e.p({leftIcon:!0,backFn:d,backgroundColor:"#F5F5FE"}),b:s.value},s.value?{c:e.t(s.value.main_target_completed_count+s.value.trial_target_completed_count),d:e.t(s.value.main_target_count+s.value.trial_target_count),e:e.t(s.value.content_score),f:e.t(s.value.word_count)}:{},{g:s.value},s.value?{h:e.t(s.value.suggestion)}:{},{i:l.value},l.value?{j:e.f(r.value,((a,t,o)=>({a:e.sr("messageListRef","a4d5263b-1-"+o,{f:1}),b:"a4d5263b-1-"+o,c:e.p({"auto-hint":!1,"auto-play":!1,"auto-pronunciation":!1,message:a,"message-session":l.value}),d:a.id})))}:{})}}),s=e._export_sfc(i,[["__scopeId","data-v-a4d5263b"]]);wx.createPage(s);
