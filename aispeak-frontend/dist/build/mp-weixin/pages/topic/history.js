"use strict";const e=require("../../common/vendor.js"),o=require("../../api/topic.js");require("../../axios/api.js"),require("../../config/env.js"),Math||t();const t=()=>"../../components/CommonHeader.js",i=e.defineComponent({__name:"history",setup(t){const i=e.ref(""),c=e.ref(!1),n=e.ref([]);e.onLoad((o=>{e.index.setNavigationBarTitle({title:"AISPeak"}),i.value=o.topicId,s(o.topicId)}));const s=e=>{c.value=!0,o.topicRequest.getTopicHistory(e).then((e=>{c.value=!1,n.value=e.data}))},a=()=>{e.index.navigateTo({url:`/pages/topic/index?topicId=${i.value}`})},d=o=>{1==o.completed?e.index.navigateTo({url:`/pages/topic/completion?topicId=${i.value}&sessionId=${o.session_id}`}):e.index.navigateTo({url:`/pages/chat/index?sessionId=${o.session_id}&backPage=topic&topicId=${i.value}`})};return(t,c)=>e.e({a:e.p({leftIcon:!0,"back-fn":a,backgroundColor:"#F5F5FE"}),b:n.value.length>0},n.value.length>0?{c:e.f(n.value,((t,c,n)=>e.e({a:t.topic.image_url,b:e.o((e=>d(t))),c:e.t(t.topic.topic),d:e.t(t.create_time),e:"1"===t.completed},(t.completed,{}),{f:"1"===t.completed?1:"",g:e.o((e=>d(t))),h:e.o((c=>(t=>{e.index.showModal({title:"提示",content:"是否删除该历史记录",confirmColor:"#6236ff",success:c=>{if(c.confirm){const c={topic_id:t.topic_id,session_id:t.session_id};o.topicRequest.deleteTopicHistory(c).then((()=>{e.index.showToast({title:"删除成功",icon:"none"}),s(i.value)}))}else c.cancel}})})(t)))})))}:{})}}),c=e._export_sfc(i,[["__scopeId","data-v-0b18af3c"]]);wx.createPage(c);
