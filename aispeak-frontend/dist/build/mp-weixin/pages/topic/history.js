"use strict";const e=require("../../common/vendor.js"),o=require("../../api/topic.js");require("../../axios/api.js"),require("../../config/env.js"),Math||t();const t=()=>"../../components/CommonHeader.js",i=e.defineComponent({__name:"history",setup(t){const i=e.ref(""),n=e.ref(!1),c=e.ref([]);e.onLoad((o=>{e.index.setNavigationBarTitle({title:"AISPeak"}),i.value=o.topicId,s(o.topicId)}));const s=e=>{n.value=!0,o.topicRequest.getTopicHistory(e).then((e=>{n.value=!1,c.value=e.data}))},a=()=>{e.index.navigateTo({url:`/pages/topic/index?topicId=${i.value}`})},d=o=>{1==o.completed?e.index.navigateTo({url:`/pages/topic/completion?topicId=${i.value}&sessionId=${o.session_id}`}):e.index.navigateTo({url:`/pages/chat/index?sessionId=${o.session_id}&backPage=topic&topicId=${i.value}`})};return(t,n)=>e.e({a:e.p({leftIcon:!0,"back-fn":a,backgroundColor:"#F5F5FE"}),b:c.value.length>0},c.value.length>0?{c:e.f(c.value,((t,n,c)=>e.e({a:t.topic.image_url,b:e.o((e=>d(t))),c:e.t(t.topic.topic),d:e.t(t.create_time),e:"1"===t.completed},(t.completed,{}),{f:"1"===t.completed?1:"",g:e.o((e=>d(t))),h:e.o((n=>(t=>{e.index.showModal({title:"提示",content:"是否删除该历史记录",confirmColor:"#6236ff",success:n=>{if(n.confirm){const n={topic_id:t.topic_id,session_id:t.session_id};o.topicRequest.deleteTopicHistory(n).then((()=>{e.index.showToast({title:"删除成功",icon:"none"}),s(i.value)}))}else n.cancel}})})(t)))})))}:{})}}),n=e._export_sfc(i,[["__scopeId","data-v-29a5451b"]]);wx.createPage(n);
