"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/chat.js");if(require("../../../axios/api.js"),require("../../../config/env.js"),!Array){e.resolveComponent("uni-popup")()}Math||(u+o+n+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const o=()=>"../../../components/AudioPlayer.js",n=()=>"./MessageSpeech.js",u=()=>"../../../components/LoadingRound.js",t=e.defineComponent({__name:"TranslationPopup",setup(o,{expose:n}){var u;const t=null==(u=e.getCurrentInstance())?void 0:u.appContext.config.globalProperties.$bus,l=e.ref(null),s=e.ref(""),v=e.ref(!1),i=e.ref(""),p=e.ref(""),r=e.ref("");e.onMounted((()=>{r.value="#fff"}));const c=e.computed((()=>!(!s.value||!s.value.trim()))),d=()=>{c.value?(v.value=!0,a.chatRequest.translateSettingLanguage({text:s.value,session_id:p.value}).then((e=>{i.value=e.data,v.value=!1})).catch((()=>{v.value=!1}))):e.index.showToast({title:"请输入文本",icon:"none"})},f=()=>{i.value?(t.emit("SendMessage",{text:i.value}),g()):e.index.showToast({title:"请输入文本并进行翻译",icon:"none"})},m=e=>{g()},g=()=>{l.value.close(),s.value="",i.value="",p.value=""};return n({open:e=>{p.value=e,l.value.open()},handleClose:g}),(a,o)=>e.e({a:e.o(g),b:s.value,c:e.o((e=>s.value=e.detail.value)),d:e.o(d),e:e.unref(c)?1:"",f:v.value},(v.value,{}),{g:i.value&&!v.value},i.value&&!v.value?{h:e.t(i.value),i:e.p({content:i.value,"session-id":p.value})}:{},{j:i.value&&!v.value},i.value&&!v.value?{k:e.o(f)}:{},{l:e.o(m),m:e.p({sessionId:p.value}),n:e.sr(l,"94a3ce05-0",{k:"translationPopup"}),o:e.p({type:"bottom","background-color":r.value})})}}),l=e._export_sfc(t,[["__scopeId","data-v-94a3ce05"]]);wx.createComponent(l);
