"use strict";const e=require("../../../common/vendor.js"),s=require("../../../api/chat.js"),a=require("../../../utils/utils.js");require("../../../axios/api.js"),require("../../../config/env.js"),Math||(m+n+i+o+u+t)();const n=()=>"../../../components/FunctionalText.js",o=()=>"../../../components/AudioPlayer.js",t=()=>"./MessageGrammarPopup.js",i=()=>"../../../components/Collect.js",m=()=>"../../../components/Loading.js",u=()=>"../../../components/LoadingRound.js",r=e.defineComponent({__name:"MessageContent",props:{message:null},setup(n,{expose:o}){const t=n,i=e.ref(null),m=e.ref(null),u=e.ref(!1),r=e.ref(!1),l=e.ref(!1);e.onMounted((()=>{t.message.auto_hint&&!0===t.message.auto_hint&&(l.value=!0),t.message.auto_pronunciation&&v()})),e.computed((()=>t.message.owner));const g=e.computed((()=>`${t.message.owner?"right":"left"}-content`)),c=()=>{r.value=!r.value},p=()=>{e.index.setClipboardData({data:t.message.content,success:()=>{e.index.showToast({title:"复制成功",icon:"none"})}})},d=()=>{l.value=!l.value},f=()=>{let e="grammar";t.message.file_name&&(e="pronunciation"),m.value.open(t.message.id,t.message.content,t.message.file_name,t.message.session_id,e)},v=()=>{u.value=!0,s.chatRequest.pronunciationInvoke({message_id:t.message.id}).then((e=>{t.message.pronunciation=e.data,u.value=!1}))};return o({autoPlayAudio:()=>{e.nextTick$1((()=>{i.value.autoPlayAudio()}))},autoHandleHint:()=>{d()},autoPronunciation:v}),(s,o)=>e.e({a:!n.message.content},n.message.content?e.e({b:!n.message.owner},n.message.owner?e.e({k:e.t(n.message.content),l:n.message.file_name},n.message.file_name?{m:e.p({direction:"right",fileName:n.message.file_name})}:{}):{c:e.sr(i,"14e820b9-1",{k:"functionalTextRef"}),d:e.p({"auto-play":n.message.auto_play||!1,messageId:n.message.id,wordClickable:!0,text:n.message.content,fileName:n.message.file_name,translateShow:r.value,textShadow:l.value}),e:e.o(c),f:r.value?1:"",g:e.p({type:"MESSAGE",messageId:n.message.id||""}),h:e.o(p),i:e.o(d),j:l.value?1:""},{n:n.message.owner?1:"",o:n.message.owner},n.message.owner?e.e({p:u.value},u.value?{}:n.message.pronunciation?e.e({r:!0===n.message.achieved_target},(n.message.achieved_target,{}),{s:e.t(e.unref(a.utils).removeDecimal(n.message.pronunciation.pronunciation_score)),t:e.o(f)}):{v:e.o(f)},{q:n.message.pronunciation}):{}):{},{w:e.sr(m,"14e820b9-5",{k:"messageGrammarRef"}),x:e.n(e.unref(g))})}}),l=e._export_sfc(r,[["__scopeId","data-v-14e820b9"]]);wx.createComponent(l);
