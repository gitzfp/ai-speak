"use strict";const e=require("../common/vendor.js"),a=require("../api/chat.js");require("../axios/api.js"),require("../config/env.js"),Math||(t+o+l)();const t=()=>"./AudioPlayer.js",l=()=>"./WordAnalysisPopup.js",o=()=>"./LoadingRound.js",s=e.defineComponent({__name:"FunctionalText",props:{text:null,textShadow:null,sessionId:null,messageId:null,fileName:null,wordClickable:null,translateShow:null,autoPlay:null},setup(t,{expose:l}){const o=t,s=e.ref(!1),u=e.ref(""),n=e.ref(!1),i=e.ref(null),r=e.ref(null);e.onMounted((()=>{})),e.watch((()=>o.translateShow),((e,a)=>{e&&!u.value&&d()}),{deep:!0});const d=()=>{u.value||(s.value=!0,o.messageId?a.chatRequest.translateInvoke({message_id:o.messageId}).then((e=>{u.value=e.data})).catch((e=>{u.value="翻译出错"})).finally((()=>{s.value=!1})):a.chatRequest.translateSourceLanguage({text:o.text}).then((e=>{u.value=e.data})).catch((e=>{u.value="翻译出错"})).finally((()=>{s.value=!1})))},c=()=>{n.value=!1},v=()=>{o.textShadow||(n.value=!0)};return l({initTranslateData:d,autoPlayAudio:()=>{e.nextTick$1((()=>{r.value.autoPlayAudio()}))}}),(a,l)=>e.e({a:t.wordClickable},t.wordClickable?{b:e.t(t.text),c:!n.value,d:e.o(v),e:t.textShadow?1:""}:{f:e.t(t.text)},{g:t.wordClickable&&n.value&&t.text},t.wordClickable&&n.value&&t.text?{h:e.f(t.text.split(" "),((a,t,l)=>({a:e.t(a),b:t,c:e.o((t=>(a=>{a=a.replace(/[^a-zA-Z]/g,""),e.nextTick$1((()=>{setTimeout((()=>{i.value.open(a)}),100)}))})(a)),t)})))}:{},{i:e.sr(r,"dc7698a3-0",{k:"audioPlayRef"}),j:e.p({autoPlay:t.autoPlay,sessionId:t.sessionId,messageId:t.messageId,fileName:t.fileName,content:t.text}),k:t.translateShow||s.value},t.translateShow||s.value?{l:e.t(u.value),m:!s.value,n:s.value}:{},{o:e.sr(i,"dc7698a3-2",{k:"wordAnalysisPopup"}),p:e.o(c)})}}),u=e._export_sfc(s,[["__scopeId","data-v-dc7698a3"]]);wx.createComponent(u);
