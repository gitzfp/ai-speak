"use strict";const e=require("../common/vendor.js"),o=require("../utils/utils.js"),l=require("./audioPlayerExecuter.js"),s=require("../config/env.js");Math||n();const n=()=>"./LoadingRound.js",t=e.defineComponent({__name:"AudioPlayer",props:{messageId:null,fileName:null,content:null,direction:null,autoPlay:null,speechRoleName:null,speechRoleStyle:null,sessionId:null},setup(n,{expose:t}){const a=n,i=e.ref(!1),u=e.ref(!1);e.ref(""),e.onMounted((()=>{a.autoPlay&&c()}));const c=async()=>{let n="";a.fileName?n=o.utils.getVoiceFileUrl(a.fileName):(a.messageId?(i.value=!0,n=`${s.__config.basePath}/message/speech?message_id=${a.messageId}`):a.content&&(i.value=!0,n=`${s.__config.basePath}/message/speech-content?content=${a.content}`,a.speechRoleName&&(n+=`&speech_role_name=${a.speechRoleName}`),a.speechRoleStyle&&(n+=`&speech_role_style=${a.speechRoleStyle}`),a.sessionId&&(n+=`&session_id=${a.sessionId}`)),e.index.getStorageSync("x-token")&&(n+=`&x_token_query=${e.index.getStorageSync("x-token")}`)),console.log(n),l.audioPlayer.playAudio({audioUrl:n,listener:{playing:()=>{i.value=!1,u.value=!0},success:()=>{i.value=!1,u.value=!1},error:()=>{i.value=!1,u.value=!1}}})};return t({autoPlayAudio:()=>{e.nextTick$1((()=>{c()}))}}),(o,l)=>e.e({a:i.value},i.value?{}:e.e({b:u.value},u.value?{c:n.direction&&"right"==n.direction?1:""}:{d:n.direction&&"right"==n.direction?1:""}),{e:e.o(c),f:u.value})}}),a=e._export_sfc(t,[["__scopeId","data-v-f83b1a2c"]]);wx.createComponent(a);
