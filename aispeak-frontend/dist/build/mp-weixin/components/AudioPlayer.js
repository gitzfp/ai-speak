"use strict";const e=require("../common/vendor.js"),o=require("../utils/utils.js"),l=require("./audioPlayerExecuter.js"),n=require("../config/env.js");Math||s();const s=()=>"./LoadingRound.js",t=e.defineComponent({__name:"AudioPlayer",props:{messageId:null,fileName:null,content:null,direction:null,autoPlay:null,speechRoleName:null,speechRoleStyle:null,sessionId:null},setup(s,{expose:t}){const a=s,i=e.ref(!1),c=e.ref(!1);e.ref(""),e.onMounted((()=>{a.autoPlay&&u()}));const u=async()=>{let s="";a.fileName?s=o.utils.getVoiceFileUrl(a.fileName):(a.messageId?(i.value=!0,s=`${n.__config.basePath}/message/speech?message_id=${a.messageId}`,console.log("聊天信息转换成语音文件再播放",s)):a.content&&(console.log("内容转换成语音后播放",a.content),i.value=!0,s=`${n.__config.basePath}/message/speech-content?content=${a.content}`,a.speechRoleName&&(s+=`&speech_role_name=${a.speechRoleName}`),a.speechRoleStyle&&(s+=`&speech_role_style=${a.speechRoleStyle}`),a.sessionId&&(s+=`&session_id=${a.sessionId}`)),e.index.getStorageSync("x-token")&&(s+=`&x_token_query=${e.index.getStorageSync("x-token")}`)),console.log(s),l.audioPlayer.playAudio({audioUrl:s,listener:{playing:()=>{i.value=!1,c.value=!0},success:()=>{i.value=!1,c.value=!1},error:()=>{i.value=!1,c.value=!1}}})};return t({autoPlayAudio:()=>{e.nextTick$1((()=>{u()}))}}),(o,l)=>e.e({a:i.value},i.value?{}:e.e({b:c.value},c.value?{c:s.direction&&"right"==s.direction?1:""}:{d:s.direction&&"right"==s.direction?1:""}),{e:e.o(u),f:c.value})}}),a=e._export_sfc(t,[["__scopeId","data-v-283fb532"]]);wx.createComponent(a);
