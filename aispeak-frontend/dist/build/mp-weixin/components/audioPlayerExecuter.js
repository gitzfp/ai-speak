"use strict";var t=Object.defineProperty,e=(e,o,n)=>(((e,o,n)=>{o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n})(e,"symbol"!=typeof o?o+"":o,n),n);const o=require("../common/vendor.js");const n=new class{constructor(){e(this,"audioContext",null)}stopAudio(){this.audioContext&&this.audioContext.stop()}playAudio({audioUrl:t,listener:e}){let o=t;if(this.audioContext,this.audioContext){const t=this.audioContext.src;if(this.audioContext.stop(),t===o)return void(this.audioContext=null)}let n=this.createInnerAudioContext(t,e);this.audioContext=n,n.play()}createInnerAudioContext(t,e){let n=null;return n=o.wx$1.createInnerAudioContext({useWebAudioImplement:!0}),n.src=t,n.onPlay((()=>{e.playing&&e.playing()})),n.onStop((()=>{e.success&&e.success(),n.destory&&n.destory(),this.audioContext=null})),n.onEnded((()=>{e.success&&e.success(),n.destory&&n.destory(),this.audioContext=null})),n.onError((t=>{e.error&&e.error()})),n}};exports.audioPlayer=n;
