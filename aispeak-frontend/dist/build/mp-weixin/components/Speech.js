"use strict";const e=require("../common/vendor.js"),a=require("./speechExecuter.js"),l=require("./audioPlayerExecuter.js"),o=require("../utils/utils.js");require("../config/env.js"),Math||s();const s=()=>"./LoadingRound.js",r=e.defineComponent({__name:"Speech",setup(s,{emit:r}){var u;null==(u=e.getCurrentInstance())||u.appContext.config.globalProperties.$bus;const c=e.ref({start:!1,processing:!1,completed:!1,voiceFileName:null}),t=e.ref(!1),i=()=>{c.value.start?a.speech.handleEndVoice():(l.audioPlayer.stopAudio(),c.value.start=!0,c.value.completed=!1,a.speech.handleVoiceStart({processing:()=>{c.value.processing=!0},success:({voiceFileName:e})=>{c.value.voiceFileName=e,c.value.processing=!1,c.value.start=!1,c.value.completed=!0},interval:e=>{c.value.remainingTime=e},cancel:()=>{c.value.processing=!1,c.value.start=!1},error:e=>{c.value.processing=!1,c.value.start=!1}}))},v=()=>{a.speech.handleEndVoice()},n=()=>{c.value.completed=!1},p=()=>{c.value.voiceFileName?l.audioPlayer.playAudio({audioUrl:o.utils.getVoiceFileUrl(c.value.voiceFileName),listener:{playing:()=>{t.value=!0},success:()=>{t.value=!1,console.log(t.value)},error:()=>{t.value=!1}}}):console.error("没有语音文件")},d=()=>{c.value.voiceFileName?(r("success",{fileName:c.value.voiceFileName}),c.value.completed=!1):console.error("没有语音文件")};return(a,l)=>e.e({a:!c.value.start&&!c.value.completed},c.value.start||c.value.completed?{}:{b:e.o(i)},{c:c.value.start},c.value.start?{d:e.o(v)}:{},{e:c.value.completed},c.value.completed?e.e({f:e.o(n),g:!t.value},(t.value,{}),{h:t.value,i:e.o(p),j:c.value.processing},(c.value.processing,{}),{k:!c.value.processing},(c.value.processing,{}),{l:e.o(d)}):{})}}),u=e._export_sfc(r,[["__scopeId","data-v-8d86ae65"]]);wx.createComponent(u);
